## ケース1: ECサイト

ECサイトを利用する最も典型的なパターンを考えてみましょう。

### 登場人物

#### ユーザ
商品を購入する人。

#### ECサイト
商品を販売している人。
トークン発行権のscopeを持つ

#### 配送業者 X
商品を配達する人。
Read権のscopeを持つ。

### シーケンス

- `ユーザ` は `ECサイト` にユーザ登録します。

- `ユーザ` は商品を購入します。

- `ECサイト` は住所トークンを発行しようと試みます。
  発行する権限がない場合、`ユーザ` にOAuth画面を提示し、**一度きりの** 住所発行権を認可してもらいます。

- `ECサイト` は住所トークン発行権を使い、 `配送業者 X` のみが読み取れる `ユーザ` の住所トークンを発行します。

- `ECサイト` は `配送業者 X` に対して住所トークンを使い配送を依頼します。

- `配送業者 X` は住所トークンと発行者 `ECサイト` を当システムに問い合わせ、実住所を手に入れ配送します。

### ポイント

商品の購入は、購入し配送される本人が操作をするため、**その場で毎回** 住所トークンを発行しても手間は大きく変わりません。
実際には、永続的な住所トークン発行権を所持したほうが圧倒的にユーザ体験は良くなります。
ケース1では単純な例としてワンタイム発行権を使ってみました。
